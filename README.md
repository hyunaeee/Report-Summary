### 프로젝트 개요

- 목표: 특허 분쟁대응 컨설팅 보고서 요약, 보고서간 유사도 검색 및 LLM간 성능 비교
- 역할: LLM 요약 모듈, 키워드 추출
- 환경: 로컬, 네이버 클로바 스튜디오

### 데이터셋

본 프로젝트는 지식재산정보원이 지원사업의 형태로 작성한 특허 분쟁대응 컨설팅 보고서를 요약하는 시스템 개발을 목표로 하였습니다. 기업으로 부터 제공받은 데이터셋은 보고서 샘플 20개로 보고서들은 여러 특허법인에서 작성되며, 양식이나 구성이 법인별로 상이하고, 길이도 20페이지부터 최대 600페이지 이상의 분량까지 다양하게 구성되어 있었습니다.

![](https://postfiles.pstatic.net/MjAyNTAyMDhfMTU1/MDAxNzM5MDE1MzYzMjU1.Q6Pi_UGtdlFnkGu_TnxhfYKZHUF2uS8lzMXcVUvgXHsg.qH9Tv1zWYRnzcPBJi5Vv9LrPdZ0cTGYJeQdkF7hHyPYg.PNG/image.png?type=w966)

데이터셋의 특징으로는 특허의 각 분야별 전문용어가 다수이고 방대한 분량으로 해당분야 전문 변리사가 아닐 경우 보고서의 내용을 이해하는데 어려움이 있습니다. 또한, 보고서 내부엔 다양한 언어(영어, 일본어, 중국어 등)이 혼재되어 있는 경우도 있었습니다. 따라서 요약문을 작성해 보고서의 전체적인 내용을 빠르게 이해할 수 있도록 요약하는 것이 핵심 테스크였습니다.

요약문 작성 이후, 요약문을 바탕으로 해당 보고서의 키워드를 LLM을 활용하여 추출하고 이를 기존방식(TF/IDF)와 비교하는 태스크와 요약문 검색을 기존 TF/IDF 외의 AI기반 검색을 구현하는 태스크도 추가적으로 요청받았습니다.

### AS IS-TO BE

|  | **AS IS** | **TO BE** |
| --- | --- | --- |
| **보고서** | **평균 200페이지 가량의 전문용어가 다수 
포함되어 내용파악이 어려운 보고서** | **해당분야 비전문가도 빠르게 내용 파악이
가능한 1-2페이지 가량의 요약문** |
| **키워드** | **TF/IDF** | **LLM을 사용하여 추출한 키워드** |
| **검색** | **TF/IDF** | **벡터 임베딩을 활용하여 동의어, 유사어
검색이 용이** |

### 프로젝트 제약 사항

- 공공기관 클라우드 보안 인증(CSAP) 중급 이상의 보안 등급을 충족하는 API 사용
- 별도의 컴퓨팅 리소스를 마련할 수 없음으로 오픈소스 LLM 사용불가
- 당시 해당 기준을 충족하는 LLM API는 네이버 클로바 스튜디오의 하이퍼 클로바X 모델로 제한됨

### 주요 문제점

- 하이퍼 클로바X 모델의 Max Token 한계(8,192 토큰, 약 12,000~16,000글자)로 인해 보고서의 평균적인 분량(약 10만 글자 이상)을 처리하기 어려움
- 타 LLM 모델 대비 현저히 적은 토큰 처리량으로 인해 요약 품질 관리에 어려움

### 접근 방법 및 전략

보고서의 방대한 분량을 제한된 토큰 환경에서 요약하기 위해 다음 두 가지 방법을 시도했습니다.

### 1. Map Reduce 방식

- 보고서를 LLM이 처리 가능한 크기의 청크로 나누어 각각 독립적으로 요약한 후 결과를 단순히 결합
- 문제점: 요약된 각 청크 간의 연결성이 부족하고, 출력 형식이 일관되지 않음

### 2. Refine 방식

- 보고서를 작은 청크로 나누되, 이전 청크의 요약문을 이후 청크에 함께 입력하여 맥락을 유지하며 요약
- 문제점: 요약이 진행될수록 이전 청크의 요약문 길이가 누적되어 Max Token 한계로 후반부 청크를 처리할 공간이 부족

최종적으로 품질과 현실적인 제약 조건을 모두 고려하여 첫 번째 방식(Map Reduce)으로 초기 요약을 진행한 후, 연결성과 형식을 보완하기 위해 별도의 재작성 과정을 추가하는 방식으로 접근했습니다.

### 시스템 구조도

![image.png](attachment:d7ea090a-fbf8-4067-b705-b81343668dde:image.png)

- pdf의 형태로 데이터가 들어오게 되고, 해당 pdf를 text형태로 파싱한 다음, 원문 텍스트의 길이에 따라 1차, 2차, 요약을 진행하게 됩니다.
- 이후 한번 요약된 요약문을 재작성하여 가독성을 높이고 청크간 연결성을 강화한 다음, 최종 요약문을 바탕으로 임베딩과 키워드 추출을 진행합니다.

![image.png](attachment:d450b712-f9e3-457e-b2ec-811163e81272:image.png)

- 보고서의 핵심 내용(문제특허, 대응전략, 국가별 특이사항 등)을 유지하며 생성된 요약문

### 키워드 추출

![image.png](attachment:389f3ab0-f4b9-44f7-8e20-ead7f0fd4f11:image.png)

- 최종 생성된 요약문을 기반으로 키워드 추출 진행
- 기존 TF/IDF 대비 키워드의 정확도 향상

### 문서 검색

- 기존의 검색방법에서 TF/IDF 키워드 기반 검색의 유사어, 동의어 검색이 안된다는 단점을 보완하여 벡터 임베딩 방식으로 검색 시스템 구현.
- 동일 카테고리의 보고서의 경우 TF/IDF 대비 정확한 유사도를 나타냄

### 결과 및 성과

- 다양한 보고서의 구성과 길이에 대해 유연하게 대처 가능한 문서 요약 프로세스를 구축
- 벡터 임베딩 기반의 문서 검색 기능 추가 개발을 통해 특허 관련 검색 효율성을 향상시킬 수 있는 가능성 제시
- 실제 현업에서 제약 조건(비용 및 기술 제한 등) 하에서 창의적이고 효과적인 해결책을 찾아내는 능력을 배양

이후 프로젝트 결과물을 기업의 데이터베이스(DB)에 적재하고 소스코드를 제공하여 성공적으로 프로젝트를 완료했습니다.

### 회고 및 배운 점

이번 프로젝트는 실제 기업과 연계하여 진행된 만큼 다양한 현실적 제약과 어려움을 극복해야 했습니다. 특히 네이버 클로바 스튜디오 모델의 Max Token 한계라는 어려운 환경에서도 다양한 방법론(Map Reduce 및 Refine)을 시도하고 최적의 결과를 도출할 수 있었습니다.

또한, 특허 분야가 AI 기술과 결합할 수 있는 여지가 크며, 특히 선행기술 조사 및 검색 분야에서 벡터 임베딩 기술의 높은 잠재력을 확인할 수 있었습니다.
